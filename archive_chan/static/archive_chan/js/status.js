google.load("visualization","1",{packages:["corechart"]});google.setOnLoadCallback(update);var statsData,timeout;$(window).resize(function(){drawChart(statsData)});$(document).ready(function(){$(".last-update-info").on("click","#update-now",function(){update()})});function update(){clearTimeout(timeout);$("#update-now i").addClass("fa-spin");var a=$.ajax({url:info_data.api_url,dataType:"json",cache:false}).done(function(c){statsData=c.chart_data;drawData(c);drawChart(c.chart_data);var b=new Date();$("#last-update").attr("datetime",b.toISOString()).attr("title",b).data("timeago",null).timeago()}).always(function(){timeout=setTimeout(update,30*1000);$("#update-now i").removeClass("fa-spin")})}function drawData(d){$("#value-last-updates").empty();var c=d.last_updates.length;for(var a=0;a<c;a++){var b=d.last_updates[a];$("#value-last-updates").append("<li>"+b.board+' <time class="timeago" datetime="'+b.date+'">'+b.date+"</time></li>")}$("#value-last-updates li time").data("timeago",null).timeago()}function drawChart(d){var a={fontSize:12,chartArea:{left:30,top:10,width:"100%",height:"90%"},legend:{position:"none"},tooltip:{isHtml:true},series:[{color:"#65c6bb"}],explorer:{maxZoomOut:2,actions:["dragToZoom","rightClickToReset"],keepInBounds:true}};var c=new google.visualization.DataTable(d);var b=new google.visualization.ColumnChart(document.getElementById("chart"));b.draw(c,a)};